<html>
    <head>
        <title> Analysis Page </title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!--  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"> -->
        <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/style.css') }}">
    </head>
    <body>
        <img src = {{url1}} alt = "a picture of {{user1.name}}">
        <img src = {{url2}} alt = "a picture of {{user2.name}}">
        <h1> Here are your results, {{user1.name}} & {{user2.name}} !</h1>

        <h2> Here are your top common artists!</h1>
        {% for artist in intersection %}
        <img src = {{artist[1]}}>
        <p>{{artist[0]}}</p>
        <p># {{artist[2]}} in {{user1.name}}'s top artists!</p>
        <p># {{artist[3]}} in {{user2.name}}'s top artists!</p>

        {% endfor %}

        <p> YOUR COMMON TRACKS ARE: </p>
        {% for song in song_intersection %}
        <figure>
            <figcaption>{{song[0]}}</figcaption>
            <audio
                controls
                src="{{song[1]}}">
                    Your browser does not support the
                    <code>audio</code> element.
            </audio>
        </figure>
        {% endfor %}    
        <br>
        <div class="circular">
          <div class="inner"></div>
          <div class="outer"></div>
          <div class="numb">
             0%
          </div>
          <div class="circle">
             <div class="bar left">
                <div class="progress"></div>
             </div>
             <div class="bar right">
                <div class="progress"></div>
             </div>
          </div>
       </div>
        <script type=text/javascript>
            var percentage = {{totalPercentage_value}}
            var totalDegrees = parseInt(360 * (0.01) * percentage);
            var leftDegrees;
            var rightDegrees;
            if(totalDegrees >= 180){
              leftDegrees = 180;
              totalDegrees -= 180;
              rightDegrees = totalDegrees;
            }
            else{
              leftDegrees = totalDegrees;
              rightDegress = 0;
            }
            leftString = "" + leftDegrees + "deg";
            rightString = "" + rightDegrees + "deg";
            document.documentElement.style
                .setProperty('--left', leftString);
            document.documentElement.style
                .setProperty('--right', rightString);
            const numb = document.querySelector(".numb");
            let counter = 0;
            setInterval(()=>{
              if(counter == parseInt(percentage)){
                clearInterval();
              }else{
                counter+=1;
                numb.textContent = counter + "%";
              }
            }, 80);
         </script>
     </body>
</html>